<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive Bash Command Explorer</title>
  <style>
    :root {
      --bg: #0a0f1f;
      --bg-2: #10172a;
      --panel: #0f1729;
      --panel-2: #131d35;
      --card: #111b30;
      --text: #dbe9ff;
      --muted: #95a9c9;
      --accent: #5df2a2;
      --accent-2: #72d5ff;
      --border: #243556;
      --shadow: rgba(2, 10, 28, 0.55);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "JetBrains Mono", "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      line-height: 1.5;
      color: var(--text);
      background:
        radial-gradient(circle at 15% 10%, rgba(93, 242, 162, 0.1), transparent 28%),
        radial-gradient(circle at 90% 90%, rgba(114, 213, 255, 0.1), transparent 24%),
        linear-gradient(145deg, var(--bg), var(--bg-2));
      min-height: 100vh;
    }

    .container {
      max-width: 1000px;
      margin: 2.2rem auto;
      padding: 0 1rem;
    }

    .terminal {
      border: 1px solid var(--border);
      border-radius: 16px;
      background: linear-gradient(180deg, var(--panel), var(--panel-2));
      box-shadow: 0 24px 60px var(--shadow);
      overflow: hidden;
    }

    .terminal-header {
      height: 42px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 0.95rem;
      background: rgba(6, 11, 21, 0.55);
    }

    .window-buttons {
      display: flex;
      align-items: center;
      gap: 0.42rem;
    }

    .dot {
      width: 11px;
      height: 11px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.12);
    }

    .dot.red { background: #ff5f56; }
    .dot.yellow { background: #ffbd2e; }
    .dot.green { background: #27c93f; }

    .terminal-label {
      color: var(--muted);
      font-size: 0.78rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .terminal-body {
      padding: 1.2rem;
    }

    h1 {
      margin: 0 0 0.25rem;
      font-size: 1.8rem;
      color: #eaf2ff;
      letter-spacing: 0.02em;
    }

    .subtitle {
      margin: 0 0 1.25rem;
      color: var(--muted);
    }

    .command-box {
      background: #0a1224;
      color: #dff8ea;
      padding: 0.8rem 1rem;
      border-radius: 10px;
      margin-bottom: 1rem;
      overflow-x: auto;
      border: 1px solid #1f3152;
      position: relative;
    }

    .command-box::before {
      content: "$";
      color: var(--accent);
      margin-right: 0.6rem;
      font-weight: 700;
    }

    .command-box.filter-bar::before {
      content: "";
      margin-right: 0;
    }

    .filter-wrap {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.65rem;
    }

    .filter-label {
      color: var(--muted);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .filter-btn {
      border: 1px solid #2a4167;
      background: #101d35;
      color: #d9e8ff;
      border-radius: 999px;
      padding: 0.4rem 0.72rem;
      font-size: 0.85rem;
      cursor: pointer;
      transition: border-color 120ms ease, background 120ms ease, transform 120ms ease;
      font-family: inherit;
    }

    .filter-btn:hover {
      border-color: var(--accent-2);
      transform: translateY(-1px);
    }

    .filter-btn.active {
      border-color: var(--accent);
      background: rgba(93, 242, 162, 0.14);
      color: #eafff4;
    }

    .command-box code,
    .option-card code,
    .overlay-panel code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.95rem;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 200px));
      gap: 1.1rem;
      justify-content: center;
    }

    .option-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.85rem;
      cursor: pointer;
      transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 120ms ease;
      position: relative;
      backdrop-filter: blur(2px);
    }

    .option-card:hover,
    .option-card:focus-visible {
      transform: translateY(-2px);
      border-color: var(--accent);
      background: #162443;
      box-shadow: 0 10px 24px rgba(93, 242, 162, 0.16);
      outline: none;
    }

    .option-name {
      font-weight: 600;
      margin-bottom: 0.2rem;
    }

    .option-short {
      color: var(--muted);
      font-size: 0.92rem;
      margin: 0;
    }

    .hint {
      margin-top: 1rem;
      color: var(--muted);
      font-size: 0.9rem;
    }

    .example {
      background: #0d162b;
      border: 1px solid #203457;
      border-radius: 8px;
      padding: 0.65rem 0.75rem;
      margin-bottom: 0.65rem;
    }

    .overlay-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(6, 11, 21, 0.4);
      backdrop-filter: blur(2.6px) saturate(108%);
      opacity: 0;
      visibility: hidden;
      transition: opacity 140ms ease, visibility 140ms ease;
      pointer-events: none;
      z-index: 900;
    }

    .overlay-backdrop.show {
      opacity: 1;
      visibility: visible;
    }

    .overlay-panel {
      position: fixed;
      left: 50%;
      bottom: 2rem;
      transform: translateX(-50%) translateY(14px);
      width: min(860px, calc(100vw - 2rem));
      background: rgba(16, 26, 49, 0.94);
      border: 1px solid rgba(93, 242, 162, 0.35);
      border-radius: 14px;
      box-shadow: 0 20px 45px rgba(0, 0, 0, 0.45);
      padding: 1rem;
      opacity: 0;
      visibility: hidden;
      transition: opacity 140ms ease, transform 140ms ease, visibility 140ms ease;
      pointer-events: none;
      z-index: 901;
    }

    .overlay-panel.show {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    .overlay-title {
      margin: 0 0 0.35rem;
      font-size: 1rem;
    }

    .overlay-desc {
      margin: 0 0 0.7rem;
      color: var(--muted);
    }

    .demo-terminal {
      margin: 0;
      min-height: 82px;
      color: #cfffe1;
      white-space: pre-wrap;
      line-height: 1.45;
      font-size: 0.9rem;
    }

    .copy-toast {
      position: fixed;
      right: 1rem;
      bottom: 1rem;
      background: rgba(16, 26, 49, 0.96);
      border: 1px solid var(--accent);
      color: #e8fff4;
      padding: 0.55rem 0.75rem;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      opacity: 0;
      transform: translateY(8px);
      pointer-events: none;
      transition: opacity 140ms ease, transform 140ms ease;
      font-size: 0.86rem;
      z-index: 1000;
    }

    .copy-toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    @media (max-width: 700px) {
      .terminal-body {
        padding: 1rem;
      }

      h1 {
        font-size: 1.45rem;
      }

      .overlay-panel {
        bottom: 1rem;
      }
    }
  </style>
</head>
<body>
  <main class="container">
    <section class="terminal">
      <header class="terminal-header">
        <div class="window-buttons">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
        </div>
        <div class="terminal-label">bash command explorer</div>
      </header>

      <div class="terminal-body">
        <h1>Interactive Bash Command Explorer</h1>
        <p class="subtitle">Hover any command option to see details in the info pane.</p>

        <div class="command-box filter-bar">
          <div class="filter-wrap" id="commandFilters">
            <span class="filter-label">Commands</span>
          </div>
        </div>

        <section class="grid" id="optionsGrid"></section>
        <p class="hint">Tip: pause cursor on a command card to open details overlay, move away to close, click to copy.</p>
      </div>
    </section>
  </main>

  <div id="hoverBackdrop" class="overlay-backdrop" aria-hidden="true"></div>
  <section id="hoverOverlay" class="overlay-panel" aria-live="polite" aria-label="Command option details" aria-hidden="true">
    <h2 class="overlay-title" id="overlayTitle">Hover a command option</h2>
    <p class="overlay-desc" id="overlayDesc">Details for the selected command and option will appear here.</p>
    <div class="example"><code id="overlayExample">Example: —</code></div>
    <div class="example">
      <code id="overlayContext">Section: —</code>
      <pre id="overlayDemo" class="demo-terminal">$ hover a command card to see a live demo</pre>
    </div>
  </section>

  <div id="copyToast" class="copy-toast" aria-live="polite"></div>
  <script>
    const scriptSource = `#!/bin/bash

#ls - List directory contents
echo -e "Hello, World!\\n"
echo "List directory:"
ls
echo -e "\\nList directory - Long List Format:"
ls -l
echo -e "\\nList directory - include hidden files:"
ls -a
echo -e "\\nList directory - human readable size:"
ls -h
echo -e "\\nList directory - Sort by modification time:"
ls -t
echo -e "\\nList directory - Reverse order while sorting:"
ls -r
echo -e "\\nList directory - List subdirectories recursively:"
ls -R
echo -e "\\nList directory - Sort by file size:"
ls -S
echo -e "\\nList directory - List one file per line:"
ls -1
echo -e "\\nList directory - List directories themselves, not their contents:"
ls -d /*
echo -e "\\nList directory - Append indicator (one of */=@|) to entries:"
ls -F

#cd - Change directory`;

    const commandDocs = {
      ls: {
        summary: "Lists directory contents.",
        options: {
          "(default)": "Shows files and folders in the current directory.",
          "-l": "Long format listing with permissions, owner, size, and time.",
          "-a": "Includes hidden files (dotfiles).",
          "-h": "Human-readable sizes, commonly with -l.",
          "-t": "Sorts by modification time (newest first).",
          "-r": "Reverses the sort order.",
          "-R": "Recursively lists subdirectories.",
          "-S": "Sorts by file size (largest first).",
          "-1": "Shows one entry per line.",
          "-d": "Lists directories themselves, not their contents.",
          "-F": "Appends type indicators such as /, *, or @."
        }
      },
      echo: {
        summary: "Prints text to the terminal.",
        options: {
          "(default)": "Prints text exactly as given.",
          "-e": "Enables escape sequences like \\n for new lines."
        }
      },
      cd: {
        summary: "Changes the current directory.",
        options: {
          "(default)": "Changes to the specified path."
        }
      }
    };

    const grid = document.getElementById("optionsGrid");
    const commandFilters = document.getElementById("commandFilters");
    const hoverBackdrop = document.getElementById("hoverBackdrop");
    const hoverOverlay = document.getElementById("hoverOverlay");
    const overlayTitle = document.getElementById("overlayTitle");
    const overlayDesc = document.getElementById("overlayDesc");
    const overlayExample = document.getElementById("overlayExample");
    const overlayContext = document.getElementById("overlayContext");
    const overlayDemo = document.getElementById("overlayDemo");
    const copyToast = document.getElementById("copyToast");

    let copyToastTimer = null;
    let demoRunId = 0;
    let overlayHideTimer = null;
    let overlayShowTimer = null;
    let selectedCommand = "";

    function normalizeOption(command, args) {
      if (!args || !args.length) {
        return "(default)";
      }

      if (command === "ls") {
        const firstOption = args.find((arg) => arg.startsWith("-"));
        if (!firstOption) {
          return "(default)";
        }
        if (firstOption.startsWith("-d")) {
          return "-d";
        }
        return firstOption;
      }

      if (command === "echo") {
        return args[0] === "-e" ? "-e" : "(default)";
      }

      if (args[0] && args[0].startsWith("-")) {
        return args[0];
      }

      return "(default)";
    }

    function parseScript(scriptText) {
      const lines = scriptText.split("\n");
      const cards = [];
      let currentSection = "General";

      lines.forEach((line) => {
        const trimmed = line.trim();
        if (!trimmed) {
          return;
        }

        if (trimmed.startsWith("#!")) {
          return;
        }

        if (trimmed.startsWith("#")) {
          currentSection = trimmed.slice(1).trim();
          return;
        }

        const parts = trimmed.split(/\s+/);
        const command = parts[0];
        const args = parts.slice(1);
        const option = normalizeOption(command, args);
        const docs = commandDocs[command] || { summary: "Shell command.", options: {} };
        const optionDetail = docs.options[option] || docs.options["(default)"] || "No additional option details available.";

        cards.push({
          section: currentSection,
          command,
          option,
          detail: optionDetail,
          summary: docs.summary,
          raw: trimmed
        });
      });

      const unique = [];
      const seen = new Set();

      cards.forEach((card) => {
        const key = `${card.command}::${card.option}`;
        if (!seen.has(key)) {
          seen.add(key);
          unique.push(card);
        }
      });

      return unique;
    }

    function showInfo(item) {
      if (overlayHideTimer) {
        clearTimeout(overlayHideTimer);
      }

      if (overlayShowTimer) {
        clearTimeout(overlayShowTimer);
      }

      overlayTitle.textContent = `${item.command} ${item.option}`;
      overlayDesc.textContent = `${item.summary} ${item.detail}`;
      overlayExample.textContent = `Example: ${item.raw}`;
      overlayContext.textContent = `Section: ${item.section}`;

      hoverBackdrop.classList.add("show");
      hoverOverlay.classList.add("show");
      hoverBackdrop.setAttribute("aria-hidden", "false");
      hoverOverlay.setAttribute("aria-hidden", "false");

      runTerminalDemo(item);
    }

    function closeInfoOverlay() {
      demoRunId += 1;
      hoverBackdrop.classList.remove("show");
      hoverOverlay.classList.remove("show");
      hoverBackdrop.setAttribute("aria-hidden", "true");
      hoverOverlay.setAttribute("aria-hidden", "true");
    }

    function queueCloseInfoOverlay() {
      if (overlayShowTimer) {
        clearTimeout(overlayShowTimer);
      }

      if (overlayHideTimer) {
        clearTimeout(overlayHideTimer);
      }
      overlayHideTimer = setTimeout(() => {
        closeInfoOverlay();
      }, 70);
    }

    function queueShowInfo(item) {
      if (overlayShowTimer) {
        clearTimeout(overlayShowTimer);
      }

      if (overlayHideTimer) {
        clearTimeout(overlayHideTimer);
      }

      overlayShowTimer = setTimeout(() => {
        showInfo(item);
      }, 220);
    }

    function getDemoOutput(item) {
      if (item.command === "ls") {
        if (item.option === "-l") return ["-rw-r--r--  1 user  staff   912 Feb 23 README.md", "-rwxr-xr-x  1 user  staff  1520 Feb 23 script.sh"];
        if (item.option === "-a") return [".", "..", ".gitignore", "README.md", "script.sh"];
        if (item.option === "-R") return [".", "README.md", "script.sh"];
        if (item.option === "-1") return ["README.md", "script.sh"];
        if (item.option === "-d") return ["/"];
        return ["README.md  script.sh"];
      }

      if (item.command === "echo") {
        if (item.option === "-e") {
          return ["Hello, World!", ""];
        }
        const echoText = item.raw.replace(/^echo\s+(-e\s+)?/, "").replace(/^"|"$/g, "");
        return [echoText || "(text output)"];
      }

      if (item.command === "cd") {
        return ["Current directory changed."];
      }

      return ["Command executed."];
    }

    function sleep(ms) {
      return new Promise((resolve) => setTimeout(resolve, ms));
    }

    async function runTerminalDemo(item) {
      demoRunId += 1;
      const runId = demoRunId;
      const commandText = `$ ${item.raw}`;
      const outputLines = getDemoOutput(item);

      for (let i = 0; i <= commandText.length; i += 1) {
        if (runId !== demoRunId) return;
        overlayDemo.textContent = `${commandText.slice(0, i)}█`;
        await sleep(15);
      }

      if (runId !== demoRunId) return;
      overlayDemo.textContent = commandText;

      for (const line of outputLines) {
        if (runId !== demoRunId) return;
        await sleep(110);
        overlayDemo.textContent += `\n${line}`;
      }
    }

    function showCopyToast(message) {
      if (copyToastTimer) {
        clearTimeout(copyToastTimer);
      }
      copyToast.textContent = message;
      copyToast.classList.add("show");
      copyToastTimer = setTimeout(() => {
        copyToast.classList.remove("show");
      }, 1300);
    }

    async function copyText(text) {
      try {
        if (navigator.clipboard && window.isSecureContext) {
          await navigator.clipboard.writeText(text);
          return true;
        }
      } catch (error) {
      }

      try {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed";
        textArea.style.left = "-9999px";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        const copied = document.execCommand("copy");
        document.body.removeChild(textArea);
        return copied;
      } catch (error) {
        return false;
      }
    }

    const commandCards = parseScript(scriptSource);

    const commands = [...new Set(commandCards.map((item) => item.command))];

    function setActiveFilterButton() {
      const buttons = commandFilters.querySelectorAll(".filter-btn");
      buttons.forEach((button) => {
        const isActive = button.dataset.command === selectedCommand;
        button.classList.toggle("active", isActive);
      });
    }

    function renderCards() {
      grid.innerHTML = "";
      closeInfoOverlay();

      const visibleCards = commandCards.filter((item) => item.command === selectedCommand);

      visibleCards.forEach((item) => {
      const card = document.createElement("article");
      card.className = "option-card";
      card.tabIndex = 0;
      card.innerHTML = `
        <div class="option-name"><code>${item.command}</code> <code>${item.option}</code></div>
      `;

      card.addEventListener("mouseenter", () => queueShowInfo(item));
      card.addEventListener("focus", () => showInfo(item));
      card.addEventListener("mouseleave", () => queueCloseInfoOverlay());
      card.addEventListener("blur", () => queueCloseInfoOverlay());
      card.addEventListener("click", async () => {
        const copied = await copyText(item.raw);
        showCopyToast(copied ? `Copied: ${item.raw}` : "Copy failed");
      });

      grid.appendChild(card);
    });
    }

    function renderFilters() {
      commands.forEach((command) => {
        const button = document.createElement("button");
        button.type = "button";
        button.className = "filter-btn";
        button.dataset.command = command;
        button.textContent = command;
        button.addEventListener("click", () => {
          selectedCommand = command;
          setActiveFilterButton();
          renderCards();
        });
        commandFilters.appendChild(button);
      });

      selectedCommand = commands[0] || "";
      setActiveFilterButton();
    }

    renderFilters();
    renderCards();

  </script>
</body>
</html>
